# Wails v3 configuration file
version: '3'

# Application information
info:
  companyName: "ichi0g0y"
  productName: "Twitch Overlay"
  productIdentifier: "com.ichi0g0y.twitch-overlay"
  description: "Twitch overlay application with thermal printer support"
  copyright: "Copyright © 2025 ichi0g0y"
  comments: "Twitch overlay application with thermal printer support"
  version: "1.0.0"

# Dev mode configuration
dev_mode:
  root_path: .
  log_level: warn
  debounce: 1000
  ignore:
    dir:
      - .git
      - node_modules
      - frontend/node_modules
      - web/node_modules
      - bin
      - build/bin
    file:
      - .DS_Store
      - .gitignore
      - .gitkeep
    watched_extension:
      - "*.go"
    git_ignore: true
  executes:
    - cmd: wails3 task -dir build install:frontend:deps
      type: once
    - cmd: wails3 task -dir build build:web:overlay
      type: blocking
    - cmd: go mod tidy
      type: blocking
    - cmd: wails3 generate bindings -clean=true
      type: blocking
    - cmd: wails3 task -dir build dev:frontend
      type: background
    # Viteの起動待ち（起動直後にWails側の接続チェックで落ちるのを防ぐ）
    - cmd: python3 build/wait_vite.py
      type: blocking
    - cmd: go build -o build/bin/twitch-overlay
      type: blocking
    - cmd: ./build/bin/twitch-overlay
      type: primary
