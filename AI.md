# AI

このドキュメントは、**Conductor上でこのリポジトリを扱うときの追加プロンプト設定**だけをまとめたものです。

実装方針・レビュー運用・厳守ルールはこのファイルでは定義しません。
必ず `.ai/` 配下のルールドキュメントを参照してください（正はそちらです）。

- `.ai/behavior.md`
- `.ai/rules.md`
- `.ai/workflow.md`
- `.ai/review.md`
- `.ai/git.md`

> 注記: `.ai/` 配下が未配置の環境では、リポジトリ内の `AGENTS.md` を優先参照してください。

## コーディングからレビューまでの流れ（Conductor）

Conductorでの基本的な進め方は、次の順番です。

1. `AGENTS.md` と `.ai/` 必読ファイルを確認
2. 作業開始時に以下3点を先に報告
   - 読み込んだルールファイル
   - 今回の作業対象
   - 作業前に守る制約
3. `issues/` に計画・手順・受け入れ条件を記載
4. Issue単位でworktreeを作成してコーディング依頼
5. レビュー依頼時にIssueを `Review Waiting` へ更新
6. `/review-verify` で指摘対応（採用分対応時は `In Progress` へ戻す）
7. 修正なしレビュー完了または採用分修正完了後、PRマージ時に `Done` へ更新（不要ならClose）
8. 小さなPRを順次適用
9. 必要なら `/commit` または `/commit!`

### コマンド説明

- コーディング依頼: 明示コマンドは不要です。通常の依頼文で実装を指示します。
- レビュー依頼: 明示コマンドは不要です。差分レビューを依頼します。
- `/review-verify`: `.context/_review_feedback.md` を読み込み、採用された指摘のみ修正します。
- `/commit`: 確認付きコミットです。候補メッセージ確認後にコミットします。
- `/commit!`: 確認なしで即時コミットします。
- PR作成時: 1Issue 1PRを基本とし、対象Issueリンクを本文に記載します。

### レビュー連携の要点

- レビューで修正点がある場合は、レビュー担当が先に `.context/_review_feedback.md` を作成します。
- レビュー結果の報告は日本語で記述します。
- `/review-verify` では指摘を「採用 / 不採用 / 追加情報必要」に分類して報告します。

## 既存プロジェクトへの移植時ルール

- テンプレート側 `BOOTSTRAP.md` と `docs/guides/AI_INSTRUCTION_PORTING.md` は参照専用です。
- これら2ファイルを対象リポジトリへ追加しません。
- 既存 `AGENTS.md` / `CLAUDE.md` / `AI.md` / `.ai/*.md` は上書きせず統合します。
- 最終報告で採用方針（採用 / 不採用 / 保留）を明記します。

## Conductor利用時の追加プロンプト

Conductorで依頼する際は、依頼文に次の追加条件を含めてください。
特に、回答・報告・PR本文は日本語で記述することを毎回明記してください。

### review依頼時

```text
- レビュー運用の正は `.ai/review.md` と `.ai/workflow.md` を参照し、重複する指示がある場合はそちらを優先してください。
- レビュー結果の報告は必ず日本語で記述してください。
- `.context/_review_feedback.md` の出力有無を必ず報告してください。
```

### PR作成依頼時

```text
- PR作成・コミット運用で重複するルールは `.ai/git.md` と `.ai/workflow.md` を参照し、そちらを優先してください。
- PR作成に関する報告・提案・本文はすべて日本語で記述してください。
- PRのbaseブランチは `develop` にしてください。
- PR本文は日本語で、以下の見出しを含めてください:
  - 概要
  - 変更内容
  - テスト手順
  - 影響範囲
  - チェックリスト
- 実行した確認コマンド（例: task check:all, task gen:api, task gen:db）と結果を本文に明記してください。
- 未実施の検証がある場合は「未実施項目」と理由を明記してください。
```
